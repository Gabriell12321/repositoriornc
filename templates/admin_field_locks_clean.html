<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîê Permiss√µes de Campos RNC - IPPEL</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/field_locks_premium.css') }}">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Gerenciar Permiss√µes de Campos RNC</h1>
            <p>Configure quais campos cada grupo pode editar na cria√ß√£o de RNCs. Clique nos campos para bloquear/desbloquear o acesso.</p>
        </div>

        <div class="main-content">
            <div class="sidebar">
                <h3>üë• Grupos</h3>
                <input type="text" class="search-box" id="groupSearch" placeholder="Buscar grupo...">
                <ul class="group-list" id="groupList">
                    <!-- Grupos ser√£o carregados via JavaScript -->
                </ul>
            </div>

            <div class="content-area">
                <div id="loading" class="loading">
                    <p>Selecione um grupo na lista ao lado para configurar as permiss√µes de campos</p>
                </div>

                <div id="groupContent" style="display: none;">
                    <h3 id="groupTitle">Configura√ß√µes do Grupo</h3>
                    
                    <div class="actions-bar">
                        <button class="btn btn-success" onclick="saveChanges()">
                            <span>üíæ</span> Salvar Altera√ß√µes
                        </button>
                        <button class="btn btn-primary" onclick="unlockAll()">
                            <span>üîì</span> Liberar Todos
                        </button>
                        <button class="btn btn-warning" onclick="lockAll()">
                            <span>üîí</span> Bloquear Todos
                        </button>
                        <button class="btn btn-danger" onclick="resetGroup()">
                            <span>üóëÔ∏è</span> Resetar Grupo
                        </button>
                    </div>

                    <div id="alerts"></div>

                    <div class="legend">
                        <div class="legend-item">
                            <div class="legend-color unlocked"></div>
                            <span><strong>üîì Campo Liberado</strong> - Clique para bloquear</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color locked"></div>
                            <span><strong>üîí Campo Bloqueado</strong> - Clique para liberar</span>
                        </div>
                    </div>

                    <div class="rnc-form-preview">
                        <div class="section-title">üìã INFORMA√á√ïES PRINCIPAIS DO RNC</div>
                        
                        <div class="form-section">
                            <div class="form-row">
                                <div class="field-container">
                                    <div class="field-preview" data-field="title">
                                        <div class="field-label">üìù T√≠tulo do RNC</div>
                                        <div class="field-placeholder">Ex: Falha no equipamento de produ√ß√£o - Linha A</div>
                                        <div class="field-status"></div>
                                    </div>
                                </div>
                                <div class="field-container">
                                    <div class="field-preview" data-field="equipment">
                                        <div class="field-label">üîß Equipamento/Sistema</div>
                                        <div class="field-placeholder">Ex: Linha de montagem A, M√°quina X, Sistema Y</div>
                                        <div class="field-status"></div>
                                    </div>
                                </div>
                                <div class="field-container">
                                    <div class="field-preview" data-field="client">
                                        <div class="field-label">üè¢ Cliente/Departamento</div>
                                        <div class="field-placeholder">Selecione o cliente</div>
                                        <div class="field-status"></div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="field-container">
                                    <div class="field-preview" data-field="description">
                                        <div class="field-label">üìÑ Descri√ß√£o</div>
                                        <div class="field-placeholder">Descreva brevemente o problema identificado</div>
                                        <div class="field-status"></div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="field-container">
                                    <div class="field-preview" data-field="priority">
                                        <div class="field-label">‚ö° N√≠vel de Urg√™ncia</div>
                                        <div class="field-placeholder">üî¥ M√©dia - Resolver em at√© 7 dias</div>
                                        <div class="field-status"></div>
                                    </div>
                                </div>
                                <div class="field-container">
                                    <div class="field-preview" data-field="price">
                                        <div class="field-label">üí∞ Custo Estimado (R$)</div>
                                        <div class="field-placeholder">Custo estimado para corre√ß√£o do impacto financeiro</div>
                                        <div class="field-status"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="section-title">üë• RESPONSABILIDADES E SETORES</div>
                        
                        <div class="form-section">
                            <div class="form-row">
                                <div class="field-container">
                                    <div class="field-preview" data-field="responsavel">
                                        <div class="field-label">üë§ Respons√°vel pela Detec√ß√£o</div>
                                        <div class="field-placeholder">Nome do funcion√°rio que detectou</div>
                                        <div class="field-status"></div>
                                    </div>
                                </div>
                                <div class="field-container">
                                    <div class="field-preview" data-field="inspetor">
                                        <div class="field-label">üîç Inspetor</div>
                                        <div class="field-placeholder">Quem identificou o problema</div>
                                        <div class="field-status"></div>
                                    </div>
                                </div>
                                <div class="field-container">
                                    <div class="field-preview" data-field="assigned_user_id">
                                        <div class="field-label">üìã Atribuir a um Usu√°rio</div>
                                        <div class="field-placeholder">Filtrar por grupos selecionados</div>
                                        <div class="field-status"></div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="field-container">
                                    <div class="field-preview" data-field="setor">
                                        <div class="field-label">üè≠ Setor</div>
                                        <div class="field-placeholder">Qual setor onde foi detectado</div>
                                        <div class="field-status"></div>
                                    </div>
                                </div>
                                <div class="field-container">
                                    <div class="field-preview" data-field="area_responsavel">
                                        <div class="field-label">üìç √Årea/Localiza√ß√£o</div>
                                        <div class="field-placeholder">Ex: Setor de Produ√ß√£o, Cap√≠tulo 1, Piso 2</div>
                                        <div class="field-status"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="section-title">üîß DADOS T√âCNICOS E ESPECIFICA√á√ïES</div>
                        
                        <div class="form-section">
                            <div class="form-row">
                                <div class="field-container">
                                    <div class="field-preview" data-field="material">
                                        <div class="field-label">üß± Material</div>
                                        <div class="field-placeholder">Descri√ß√£o do material</div>
                                        <div class="field-status"></div>
                                    </div>
                                </div>
                                <div class="field-container">
                                    <div class="field-preview" data-field="quantity">
                                        <div class="field-label">üìä Quantidade</div>
                                        <div class="field-placeholder">Quantidade envolvida</div>
                                        <div class="field-status"></div>
                                    </div>
                                </div>
                                <div class="field-container">
                                    <div class="field-preview" data-field="drawing">
                                        <div class="field-label">üìê Desenho</div>
                                        <div class="field-placeholder">N√∫mero do desenho</div>
                                        <div class="field-status"></div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="field-container">
                                    <div class="field-preview" data-field="mp">
                                        <div class="field-label">üî¢ MP</div>
                                        <div class="field-placeholder">C√≥digo MP</div>
                                        <div class="field-status"></div>
                                    </div>
                                </div>
                                <div class="field-container">
                                    <div class="field-preview" data-field="revision">
                                        <div class="field-label">üîÑ Revis√£o</div>
                                        <div class="field-placeholder">N√∫mero da revis√£o</div>
                                        <div class="field-status"></div>
                                    </div>
                                </div>
                                <div class="field-container">
                                    <div class="field-preview" data-field="position">
                                        <div class="field-label">üìç Posi√ß√£o</div>
                                        <div class="field-placeholder">Posi√ß√£o no desenho</div>
                                        <div class="field-status"></div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="field-container">
                                    <div class="field-preview" data-field="cv">
                                        <div class="field-label">üìã CV</div>
                                        <div class="field-placeholder">C√≥digo CV</div>
                                        <div class="field-status"></div>
                                    </div>
                                </div>
                                <div class="field-container">
                                    <div class="field-preview" data-field="conjunto">
                                        <div class="field-label">üîß Conjunto</div>
                                        <div class="field-placeholder">Nome do conjunto</div>
                                        <div class="field-status"></div>
                                    </div>
                                </div>
                                <div class="field-container">
                                    <div class="field-preview" data-field="modelo">
                                        <div class="field-label">üéØ Modelo</div>
                                        <div class="field-placeholder">Modelo do equipamento</div>
                                        <div class="field-status"></div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="field-container">
                                    <div class="field-preview" data-field="description_drawing">
                                        <div class="field-label">üìù Descri√ß√£o do Desenho</div>
                                        <div class="field-placeholder">Descri√ß√£o detalhada do desenho</div>
                                        <div class="field-status"></div>
                                    </div>
                                </div>
                                <div class="field-container">
                                    <div class="field-preview" data-field="purchase_order">
                                        <div class="field-label">üõí Ordem de Compra</div>
                                        <div class="field-placeholder">N√∫mero da ordem de compra</div>
                                        <div class="field-status"></div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="field-container">
                                    <div class="field-preview" data-field="justificativa">
                                        <div class="field-label">üí≠ Justificativa</div>
                                        <div class="field-placeholder">Justificativa para o RNC</div>
                                        <div class="field-status"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/field_locks_new.js') }}"></script>
</body>
</html>