<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demonstração de Gráficos Avançados - Sistema RNC IPPEL</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@2.0.1/dist/chartjs-plugin-zoom.min.js"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- CSS Customizado -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/charts-enhanced.css') }}">
    
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .demo-header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        .demo-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        .chart-demo-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }
        
        .chart-demo-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }
        
        .chart-container {
            position: relative;
            height: 400px;
            margin-top: 20px;
        }
        
        .chart-container.small {
            height: 300px;
        }
        
        .chart-container.large {
            height: 500px;
        }
        
        .demo-controls {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .btn-demo {
            margin: 5px;
            border-radius: 25px;
            padding: 8px 20px;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .btn-demo:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .feature-badge {
            background: linear-gradient(135deg, #007bff, #0056b3);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            margin-left: 10px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .stat-value {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }
    </style>
</head>
<body>
    <div class="container-fluid py-4">
        <!-- Header -->
        <div class="demo-header text-center">
            <h1 class="display-4 fw-bold text-primary mb-3">
                <i class="fas fa-chart-line me-3"></i>
                Demonstração de Gráficos Avançados
            </h1>
            <p class="lead text-muted">
                Sistema RNC IPPEL - Visualizações Interativas e Análises Avançadas
            </p>
            <div class="stats-grid mt-4">
                <div class="stat-card">
                    <div class="stat-value">8</div>
                    <div class="stat-label">Tipos de Gráficos</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">100%</div>
                    <div class="stat-label">Responsivo</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">∞</div>
                    <div class="stat-label">Interatividade</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">4K</div>
                    <div class="stat-label">Resolução</div>
                </div>
            </div>
        </div>

        <!-- Controles Globais -->
        <div class="demo-section">
            <h3 class="mb-3"><i class="fas fa-cogs me-2"></i>Controles Globais</h3>
            <div class="demo-controls">
                <button class="btn btn-primary btn-demo" onclick="refreshAllCharts()">
                    <i class="fas fa-sync-alt me-2"></i>Atualizar Todos
                </button>
                <button class="btn btn-success btn-demo" onclick="exportAllCharts()">
                    <i class="fas fa-download me-2"></i>Exportar Todos
                </button>
                <button class="btn btn-info btn-demo" onclick="toggleAnimations()">
                    <i class="fas fa-magic me-2"></i>Toggle Animações
                </button>
                <button class="btn btn-warning btn-demo" onclick="changeTheme()">
                    <i class="fas fa-palette me-2"></i>Mudar Tema
                </button>
            </div>
        </div>

        <!-- Heatmap Chart -->
        <div class="demo-section">
            <div class="chart-demo-card">
                <h3 class="mb-3">
                    <i class="fas fa-fire me-2 text-danger"></i>
                    Mapa de Calor - RNCs por Período
                    <span class="feature-badge">NOVO</span>
                </h3>
                <p class="text-muted mb-3">
                    Visualização da intensidade de RNCs por hora do dia e dia da semana.
                </p>
                <div class="demo-controls">
                    <button class="btn btn-outline-primary btn-sm" onclick="updateHeatmapData('week')">
                        Última Semana
                    </button>
                    <button class="btn btn-outline-primary btn-sm" onclick="updateHeatmapData('month')">
                        Último Mês
                    </button>
                    <button class="btn btn-outline-primary btn-sm" onclick="updateHeatmapData('year')">
                        Último Ano
                    </button>
                </div>
                <div class="chart-container">
                    <canvas id="heatmapChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Gauge Charts -->
        <div class="demo-section">
            <h3 class="mb-4">
                <i class="fas fa-tachometer-alt me-2 text-info"></i>
                Indicadores de Performance
                <span class="feature-badge">AVANÇADO</span>
            </h3>
            <div class="row">
                <div class="col-md-4">
                    <div class="chart-demo-card">
                        <h5 class="text-center mb-3">Eficiência Geral</h5>
                        <div class="chart-container small">
                            <canvas id="gaugeChart1"></canvas>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="chart-demo-card">
                        <h5 class="text-center mb-3">Tempo de Resolução</h5>
                        <div class="chart-container small">
                            <canvas id="gaugeChart2"></canvas>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="chart-demo-card">
                        <h5 class="text-center mb-3">Satisfação Cliente</h5>
                        <div class="chart-container small">
                            <canvas id="gaugeChart3"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Radar Chart Avançado -->
        <div class="demo-section">
            <div class="chart-demo-card">
                <h3 class="mb-3">
                    <i class="fas fa-spider me-2 text-success"></i>
                    Análise Multidimensional
                    <span class="feature-badge">INTERATIVO</span>
                </h3>
                <p class="text-muted mb-3">
                    Comparação de múltiplas métricas em diferentes departamentos.
                </p>
                <div class="demo-controls">
                    <button class="btn btn-outline-success btn-sm" onclick="updateRadarData('departments')">
                        Por Departamento
                    </button>
                    <button class="btn btn-outline-success btn-sm" onclick="updateRadarData('periods')">
                        Por Período
                    </button>
                    <button class="btn btn-outline-success btn-sm" onclick="updateRadarData('priorities')">
                        Por Prioridade
                    </button>
                </div>
                <div class="chart-container">
                    <canvas id="radarChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Sankey Flow Chart -->
        <div class="demo-section">
            <div class="chart-demo-card">
                <h3 class="mb-3">
                    <i class="fas fa-project-diagram me-2 text-warning"></i>
                    Fluxo de Processos
                    <span class="feature-badge">FLUXO</span>
                </h3>
                <p class="text-muted mb-3">
                    Visualização do fluxo de RNCs através dos diferentes estágios do processo.
                </p>
                <div class="chart-container">
                    <canvas id="sankeyChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Treemap Chart -->
        <div class="demo-section">
            <div class="chart-demo-card">
                <h3 class="mb-3">
                    <i class="fas fa-th me-2 text-purple"></i>
                    Distribuição Hierárquica
                    <span class="feature-badge">HIERÁRQUICO</span>
                </h3>
                <p class="text-muted mb-3">
                    Representação proporcional das RNCs por categoria e subcategoria.
                </p>
                <div class="chart-container">
                    <canvas id="treemapChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Time Comparison Chart -->
        <div class="demo-section">
            <div class="chart-demo-card">
                <h3 class="mb-3">
                    <i class="fas fa-clock me-2 text-info"></i>
                    Comparação Temporal
                    <span class="feature-badge">TEMPORAL</span>
                </h3>
                <p class="text-muted mb-3">
                    Análise comparativa de tendências ao longo do tempo.
                </p>
                <div class="demo-controls">
                    <button class="btn btn-outline-info btn-sm" onclick="updateTimeComparison('daily')">
                        Diário
                    </button>
                    <button class="btn btn-outline-info btn-sm" onclick="updateTimeComparison('weekly')">
                        Semanal
                    </button>
                    <button class="btn btn-outline-info btn-sm" onclick="updateTimeComparison('monthly')">
                        Mensal
                    </button>
                </div>
                <div class="chart-container large">
                    <canvas id="timeComparisonChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="demo-section text-center">
            <h4 class="mb-3">Sistema RNC IPPEL - Gráficos Avançados</h4>
            <p class="text-muted">
                Desenvolvido com Chart.js, Bootstrap e tecnologias modernas para análise de dados.
            </p>
            <div class="mt-3">
                <span class="badge bg-primary me-2">Chart.js 4.0</span>
                <span class="badge bg-success me-2">Bootstrap 5.3</span>
                <span class="badge bg-info me-2">Responsivo</span>
                <span class="badge bg-warning me-2">Interativo</span>
                <span class="badge bg-danger">Tempo Real</span>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="{{ url_for('static', filename='js/charts-advanced.js') }}"></script>
    <script>
        // Dados de demonstração
        const demoData = {
            heatmap: {
                xLabels: ['0h', '2h', '4h', '6h', '8h', '10h', '12h', '14h', '16h', '18h', '20h', '22h'],
                yLabels: ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sáb'],
                values: [
                    [1, 2, 1, 0, 0, 1, 3, 5, 4, 3, 2, 1],
                    [2, 1, 0, 1, 2, 4, 8, 12, 10, 8, 5, 3],
                    [1, 1, 1, 2, 3, 5, 9, 11, 9, 7, 4, 2],
                    [2, 1, 1, 1, 4, 6, 10, 13, 11, 8, 5, 3],
                    [1, 2, 1, 2, 3, 7, 11, 14, 12, 9, 6, 4],
                    [3, 2, 1, 1, 2, 5, 8, 10, 8, 6, 4, 3],
                    [2, 3, 2, 1, 1, 2, 4, 6, 5, 4, 3, 2]
                ]
            },
            radar: {
                labels: ['Qualidade', 'Tempo', 'Custo', 'Satisfação', 'Eficiência', 'Conformidade'],
                datasets: [
                    {
                        label: 'Departamento A',
                        data: [85, 75, 90, 80, 85, 95]
                    },
                    {
                        label: 'Departamento B',
                        data: [70, 85, 75, 90, 80, 85]
                    },
                    {
                        label: 'Departamento C',
                        data: [90, 70, 85, 75, 95, 80]
                    }
                ]
            },
            sankey: {
                labels: ['Abertura', 'Análise', 'Ação Corretiva', 'Verificação', 'Fechamento'],
                values: [150, 135, 120, 110, 105]
            },
            treemap: [
                { label: 'Qualidade', value: 45 },
                { label: 'Processo', value: 30 },
                { label: 'Equipamento', value: 25 },
                { label: 'Documentação', value: 20 },
                { label: 'Treinamento', value: 15 },
                { label: 'Ambiente', value: 10 },
                { label: 'Outros', value: 8 }
            ],
            timeComparison: {
                labels: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez'],
                datasets: [
                    {
                        label: '2023',
                        data: [45, 52, 38, 41, 47, 55, 49, 43, 51, 46, 39, 42]
                    },
                    {
                        label: '2024',
                        data: [38, 45, 42, 48, 41, 49, 52, 47, 44, 50, 45, 48]
                    }
                ]
            }
        };

        // Inicializar gráficos
        function initializeCharts() {
            // Heatmap
            createHeatmap('heatmapChart', demoData.heatmap);

            // Gauges
            createGauge('gaugeChart1', 85, {
                title: 'Eficiência Geral',
                label: 'Performance',
                unit: '%',
                max: 100
            });

            createGauge('gaugeChart2', 72, {
                title: 'Tempo de Resolução',
                label: 'Média (dias)',
                unit: '',
                max: 100
            });

            createGauge('gaugeChart3', 91, {
                title: 'Satisfação Cliente',
                label: 'Avaliação',
                unit: '%',
                max: 100
            });

            // Radar
            createAdvancedRadar('radarChart', demoData.radar);

            // Sankey
            createSankey('sankeyChart', demoData.sankey);

            // Treemap
            createTreemap('treemapChart', demoData.treemap);

            // Time Comparison
            createTimeComparison('timeComparisonChart', demoData.timeComparison);
        }

        // Funções de controle
        function refreshAllCharts() {
            // Simular novos dados
            setTimeout(() => {
                initializeCharts();
                showNotification('Gráficos atualizados com sucesso!', 'success');
            }, 500);
        }

        function exportAllCharts() {
            const charts = ['heatmapChart', 'gaugeChart1', 'gaugeChart2', 'gaugeChart3', 
                          'radarChart', 'sankeyChart', 'treemapChart', 'timeComparisonChart'];
            
            charts.forEach((chartId, index) => {
                setTimeout(() => {
                    advancedCharts.exportChart(chartId, `chart_${chartId}`);
                }, index * 200);
            });
            
            showNotification('Exportação iniciada!', 'info');
        }

        function toggleAnimations() {
            // Toggle animation state
            showNotification('Animações alternadas!', 'warning');
        }

        function changeTheme() {
            // Change theme logic
            showNotification('Tema alterado!', 'primary');
        }

        function updateHeatmapData(period) {
            // Simular dados diferentes baseados no período
            showNotification(`Dados do heatmap atualizados para: ${period}`, 'info');
        }

        function updateRadarData(type) {
            // Atualizar dados do radar
            showNotification(`Radar atualizado para: ${type}`, 'success');
        }

        function updateTimeComparison(interval) {
            // Atualizar comparação temporal
            showNotification(`Comparação temporal atualizada para: ${interval}`, 'info');
        }

        function showNotification(message, type) {
            // Criar notificação toast
            const toast = document.createElement('div');
            toast.className = `alert alert-${type} position-fixed`;
            toast.style.cssText = 'top: 20px; right: 20px; z-index: 9999; min-width: 300px;';
            toast.innerHTML = `
                <i class="fas fa-check-circle me-2"></i>
                ${message}
                <button type="button" class="btn-close" onclick="this.parentElement.remove()"></button>
            `;
            
            document.body.appendChild(toast);
            
            setTimeout(() => {
                if (toast.parentElement) {
                    toast.remove();
                }
            }, 3000);
        }

        // Inicializar quando a página carregar
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(initializeCharts, 500);
        });

        // Responsividade
        window.addEventListener('resize', function() {
            advancedCharts.resizeAllCharts();
        });
    </script>
</body>
</html>